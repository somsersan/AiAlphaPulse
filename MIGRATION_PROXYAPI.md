# üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ ProxyAPI.ru - –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å OpenRouter –Ω–∞ ProxyAPI.ru –¥–ª—è –≤—Å–µ—Ö LLM –æ–ø–µ—Ä–∞—Ü–∏–π.

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **`src/llm/proxyapi_client.py`** (–Ω–æ–≤—ã–π) - –ö–ª–∏–µ–Ω—Ç –¥–ª—è ProxyAPI.ru
2. **`src/llm/processor.py`** - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã
3. **`src/telegram/news_analyzer.py`** - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã
4. **`src/llm/runner.py`** - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
5. **`src/llm/__init__.py`** - –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è
6. **`docker-compose.yml`** - –ó–∞–º–µ–Ω–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
7. **`README.md`** - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
8. **`src/llm/openrouter_client.py`** - –£–¥–∞–ª–µ–Ω (–∑–∞–º–µ–Ω–µ–Ω –Ω–∞ proxyapi_client.py)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

- **–°—Ç–∞—Ä—ã–π URL**: `https://openrouter.ai/api/v1/chat/completions`
- **–ù–æ–≤—ã–π URL**: `https://api.proxyapi.ru/openrouter/v1/chat/completions`
- **–°—Ç–∞—Ä–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**: `OPENROUTER_API_KEY`
- **–ù–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**: `PROXYAPI_KEY`
- **–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å OpenRouter
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (403, 429, retry –ª–æ–≥–∏–∫–∞)

---

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á ProxyAPI.ru

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏ –ø–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á:
üëâ https://console.proxyapi.ru

### 2. –û–±–Ω–æ–≤–∏—Ç–µ `.env` —Ñ–∞–π–ª

–ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ä—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –Ω–∞ –Ω–æ–≤—É—é:

```env
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
# OPENROUTER_API_KEY=sk-or-v1-your-key

# –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é
PROXYAPI_KEY=your-proxyapi-key
```

**–ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è LLM:**

```env
# ProxyAPI.ru
PROXYAPI_KEY=your-proxyapi-key
LLM_MODEL=anthropic/claude-3.5-haiku
LLM_ANALYSIS_MODEL=anthropic/claude-3.5-sonnet
LLM_DELAY=1.0
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker:**

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã (–≤–∞–∂–Ω–æ!)
docker-compose build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f
```

**–ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –≤—Ä—É—á–Ω—É—é:**

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
# Pipeline
python pipeline_worker.py

# Telegram –±–æ—Ç
python run_telegram_bot.py
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

**–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**

```bash
python -c "
import os, requests
from dotenv import load_dotenv
load_dotenv()

response = requests.post(
    'https://api.proxyapi.ru/openrouter/v1/chat/completions',
    headers={'Authorization': f'Bearer {os.getenv(\"PROXYAPI_KEY\")}'},
    json={
        'model': 'anthropic/claude-3.5-haiku',
        'messages': [{'role': 'user', 'content': 'Hi'}],
        'max_tokens': 5
    }
)
print('‚úÖ ProxyAPI —Ä–∞–±–æ—Ç–∞–µ—Ç!' if response.status_code == 200 else f'‚ùå –û—à–∏–±–∫–∞: {response.status_code}')
print(f'–û—Ç–≤–µ—Ç: {response.json()}')
"
```

**–¢–µ—Å—Ç LLM –∞–Ω–∞–ª–∏–∑–∞:**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
python -m src.llm.runner --limit 5

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–ø –Ω–æ–≤–æ—Å—Ç–∏
python -m src.llm.runner --show-top 10
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º:

‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ OpenRouter —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ ProxyAPI.ru  
‚úÖ –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è  
‚úÖ –í—Å–µ –ø—Ä–æ–º–ø—Ç—ã –∏ –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã  
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç  
‚úÖ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, max_tokens –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π  

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

üîÑ –ë–∞–∑–æ–≤—ã–π URL API (–ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ ProxyAPI.ru)  
üîÑ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è (`OPENROUTER_API_KEY` ‚Üí `PROXYAPI_KEY`)  
üîÑ –ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ (`OpenRouterClient` ‚Üí `ProxyAPIClient`)  
üîÑ –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Ç–µ–ø–µ—Ä—å —É–ø–æ–º–∏–Ω–∞—é—Ç ProxyAPI  

---

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ProxyAPI.ru

- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –†–µ–∑–µ—Ä–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –î–æ—Å—Ç—É–ø –∫ OpenRouter, OpenAI, Anthropic, Gemini —á–µ—Ä–µ–∑ –æ–¥–∏–Ω API
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –†—É—Å—Å–∫–æ—è–∑—ã—á–Ω–∞—è —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞

---

## ‚ùì –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ 403 Forbidden

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
- –ö–ª—é—á –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–∞ –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ ProxyAPI.ru
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω

### –û—à–∏–±–∫–∞ 429 Rate Limit

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á—å—Ç–µ `LLM_DELAY` –≤ `.env` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 2.0)
- –£–º–µ–Ω—å—à–∏—Ç–µ `PIPELINE_LLM_LIMIT`

### –ü—É—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç LLM

**–†–µ—à–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –¥–æ 2 –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫.  
–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏.

---

## üìù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π:
- Telegram: @smn_v
- ProxyAPI –ø–æ–¥–¥–µ—Ä–∂–∫–∞: https://console.proxyapi.ru/support

---

**–î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:** 26 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0



